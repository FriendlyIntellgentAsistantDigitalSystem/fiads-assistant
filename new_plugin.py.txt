import requests
import os

NEWS_API_KEY = os.getenv("NEWS_API_KEY")  # Store in .env

def get_latest_headlines(country='us', max_results=5):
    url = f"https://newsapi.org/v2/top-headlines?country={country}&pageSize={max_results}&apiKey={NEWS_API_KEY}"
    response = requests.get(url)
    data = response.json()

    headlines = []
    for article in data.get('articles', []):
        headlines.append(f"{article['title']} - {article['source']['name']}")
    
    return headlines
